<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movies Aro</title>

<style>
:root {
  --yt-bg: #0f0f0f;
  --yt-surface: #181818;
  --yt-hover: #222;
  --yt-text: #ffffff;
  --yt-muted: #aaaaaa;
  --yt-accent: #ff0000;
  --yt-border: #2a2a2a;
}

body {
  font-family: "Roboto", "Segoe UI", sans-serif;
  background: var(--yt-bg);
  color: var(--yt-text);
  margin: 0;
}

header {
  background: var(--yt-surface);
  padding: 16px 24px;
  border-bottom: 1px solid var(--yt-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 999;
}
header h1 {
  color: var(--yt-accent);
  margin: 0;
  font-size: 1.6rem;
  font-weight: 700;
}
header span#status {
  color: var(--yt-muted);
  font-size: 0.9rem;
}

.main {
  max-width: 960px;
  margin: 30px auto;
  padding: 0 15px;
}

.controls {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

input[type="text"] {
  flex: 1;
  padding: 12px 14px;
  border-radius: 6px;
  border: 1px solid var(--yt-border);
  background: var(--yt-surface);
  color: var(--yt-text);
  font-size: 15px;
}
input[type="text"]::placeholder { color: var(--yt-muted); }

button {
  padding: 12px 18px;
  border-radius: 6px;
  border: none;
  background-color: var(--yt-accent);
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s, transform 0.2s;
}
button:hover { background-color: #e60000; transform: translateY(-1px); }
button:disabled { opacity: 0.5; cursor: not-allowed; }

.result {
  background: var(--yt-surface);
  border: 1px solid var(--yt-border);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 15px;
}
.result:hover { background: var(--yt-hover); }

.meta {
  font-size: 0.95rem;
  margin-bottom: 10px;
  white-space: pre-wrap;
}

.links {
  margin-top: 10px;
  border-top: 1px solid var(--yt-border);
  padding-top: 10px;
}
.links a {
  display: inline-block;
  background: var(--yt-hover);
  padding: 8px 12px;
  border-radius: 4px;
  margin: 5px 8px 0 0;
  color: var(--yt-text);
  text-decoration: none;
}
.links a:hover { background: var(--yt-accent); }

.error { color: #ff6b6b; font-weight: 600; }
.loading { color: var(--yt-muted); }

footer {
  text-align: center;
  color: var(--yt-muted);
  padding: 15px;
  border-top: 1px solid var(--yt-border);
}

/* ðŸŽ¬ YouTube-style video overlay with loading animation */
#videoOverlay {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.97);
  z-index: 9999;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  animation: fadeIn 0.3s ease;
}
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

.video-container {
  background: #000;
  width: 90%;
  max-width: 1000px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 0 15px rgba(0,0,0,0.6);
  position: relative;
}

.video-header {
  background: var(--yt-surface);
  color: var(--yt-text);
  padding: 10px 14px;
  font-size: 1rem;
  font-weight: 500;
  border-bottom: 1px solid var(--yt-border);
}

.video-player {
  width: 100%;
  height: 65vh;
  background: #000;
  opacity: 0;
  transition: opacity 0.4s ease;
}

#closeVideo {
  position: absolute;
  top: 10px;
  right: 12px;
  background: none;
  border: none;
  color: var(--yt-text);
  font-size: 1.4rem;
  cursor: pointer;
  z-index: 10;
  opacity: 0.8;
}
#closeVideo:hover { opacity: 1; }

/* ðŸ”„ Loader spinner */
.loader {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  border: 5px solid #333;
  border-top: 5px solid var(--yt-accent);
  border-radius: 50%;
  width: 50px; height: 50px;
  animation: spin 1s linear infinite;
}
@keyframes spin { 0%{transform:translate(-50%,-50%) rotate(0deg);} 100%{transform:translate(-50%,-50%) rotate(360deg);} }

@media (max-width: 600px) {
  .controls { flex-direction: column; }
  button { width: 100%; }
  .video-player { height: 45vh; }
}
</style>
</head>

<body>
<header>
  <h1>MOVIES ARO</h1>
  <span id="status">Loading files...</span>
</header>

<div class="main">
  <div class="controls">
    <input type="text" id="q" placeholder="Type movie name...">
    <button id="searchBtn">Search</button>
  </div>

  <div class="hint">âŒ› Please wait.. <span id="count">10</span> seconds before searching.</div>

  <div id="output"></div>
</div>

<footer>Â© 2025 Movies Aro â€¢ All Rights Reserved</footer>

<!-- ðŸŽ¥ YouTube-style player overlay -->
<div id="videoOverlay">
  <div class="video-container">
    <button id="closeVideo">âœ•</button>
    <div class="video-header" id="videoTitle">Now Playing</div>
    <div class="loader" id="videoLoader"></div>
    <video id="videoPlayer" class="video-player" controls autoplay playsinline controlsList="nodownload"></video>
  </div>
</div>

<script>
let t=10,el=document.getElementById("count");
let x=setInterval(()=>{ el.textContent=--t; if(t<=0) clearInterval(x); },1000);

const yearlyFiles=[
  "1920.txt","1945.txt","1947.txt","1950.txt","1993.txt","1995.txt","1996.txt","1999.txt",
  "2003.txt","2005.txt","2007.txt","2008.txt","2009.txt","2010.txt","2012.txt","2013.txt",
  "2014.txt","2015.txt","2016.txt","2017.txt","2018.txt","2019.txt","2020.txt","2021.txt",
  "2022.txt","2023.txt","2024.txt","2025.txt","Unknown_Year.txt"
];
let files=[],loadedCount=0;

function escapeHtml(s){return String(s).replace(/[&<>]/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m]));}

async function loadAllFiles(){
  const statusEl=document.getElementById('status');
  for(const fname of yearlyFiles){
    try{
      const resp=await fetch(fname);
      const data=await resp.text();
      const rawBlocks=data.split('---').map(b=>b.trim()).filter(Boolean);
      const parsed=rawBlocks.map(b=>{
        const nameM=b.match(/File Name:\s*(.*)/i);
        const sizeM=b.match(/File Size:\s*(.*)/i);
        const linkM=b.match(/Download Link:\s*(.*)/i);
        return {name:nameM?nameM[1].trim():'',size:sizeM?sizeM[1].trim():'',link:linkM?linkM[1].trim():''};
      }).filter(f=>f.name&&f.size&&f.link);
      files=files.concat(parsed);
      loadedCount++;
    }catch{}
    statusEl.textContent=`Loaded ${loadedCount} / ${yearlyFiles.length} files`;
  }
  statusEl.textContent=`âœ… Loaded ${loadedCount} / ${yearlyFiles.length} files`;
}

function renderResults(list){
  const out=document.getElementById('output');
  out.innerHTML='';
  if(!list.length){out.innerHTML='<div class="error">No results found.</div>';return;}
  list.forEach((f,i)=>{
    const c=document.createElement('div');
    c.className='result';
    c.innerHTML=`
      <div class="meta"><b>${escapeHtml(f.name)}</b><br>Size: ${escapeHtml(f.size)}</div>
      <button data-link="${escapeHtml(f.link)}" data-title="${escapeHtml(f.name)}" class="get-links">Show Play Servers</button>
      <div class="links" id="links-${i}"></div>`;
    out.appendChild(c);
    const btn=c.querySelector('.get-links');
    const box=c.querySelector(`#links-${i}`);
    btn.addEventListener('click',async()=>{
      btn.disabled=true;
      const t=btn.textContent;
      btn.textContent='Loading...';
      try{await fetchAndShow(btn.dataset.link,box,btn.dataset.title);}
      catch(e){box.innerHTML='<div class="error">Error loading</div>';}
      btn.disabled=false;btn.textContent=t;
    });
  });
}

async function fetchAndShow(url,el,title){
  el.innerHTML='<div class="loading">Please Wait...</div>';
  const proxy=`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;
  let txt;
  try{const r=await fetch(proxy);txt=await r.text();}
  catch{const fb=`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`;const r2=await fetch(fb);txt=await r2.text();}
  const p=new DOMParser();
  const d=p.parseFromString(txt,'text/html');
  let div=d.querySelector('.download');
  if(!div){
    const m=txt.match(/<div[^>]*class=["']?download["']?[^>]*>[\s\S]*?<\/div>/i);
    if(m)div=p.parseFromString(m[0],'text/html').body.firstElementChild;
  }
  if(!div){el.innerHTML='<div class="error">No play section found.</div>';return;}
  el.innerHTML=div.outerHTML.replace(/Download Server/gi,'Play Server');
  el.querySelectorAll('a').forEach(a=>{
    a.addEventListener('click',e=>{
      e.preventDefault();
      playVideo(a.href,title);
    });
  });
}

function playVideo(src,title){
  const overlay=document.getElementById('videoOverlay');
  const player=document.getElementById('videoPlayer');
  const loader=document.getElementById('videoLoader');
  const titleEl=document.getElementById('videoTitle');
  titleEl.textContent=title||'Now Playing';
  player.style.opacity=0;
  loader.style.display='block';
  player.src=src;
  overlay.style.display='flex';
  player.load();
  player.addEventListener('canplay',()=>{
    loader.style.display='none';
    player.style.opacity=1;
  },{once:true});
}

document.getElementById('closeVideo').addEventListener('click',()=>{
  const o=document.getElementById('videoOverlay');
  const p=document.getElementById('videoPlayer');
  p.pause();p.src='';
  o.style.display='none';
});

const q=document.getElementById('q');
document.getElementById('searchBtn').addEventListener('click',()=>search());
q.addEventListener('keydown',e=>{if(e.key==='Enter')search();});
function search(){
  const val=q.value.trim();
  const out=document.getElementById('output');
  if(!val){out.innerHTML='<div class="error">Type a search term.</div>';return;}
  const res=files.filter(f=>f.name.toLowerCase().includes(val.toLowerCase()));
  renderResults(res);
}

(async()=>{await loadAllFiles();})();
</script>
</body>
</html>
